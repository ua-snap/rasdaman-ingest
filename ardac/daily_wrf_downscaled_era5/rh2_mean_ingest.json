{
    "config": {
      "service_url": "https://localhost/rasdaman/ows",
      "tmp_directory": "/tmp/",
      "crs_resolver": "http://localhost:8080/def/",
      "default_crs": "http://localhost:8080/def/crs/EPSG/0/3338",
      "default_null_values": [
        "nan"
      ],
      "mock": false,
      "automated": true
    },
    "hooks": [
      {
        "description": "Create Daily Mean Relative Humidity WMS style for ARDAC",
        "when": "after_import",
        "cmd": ". /etc/default/rasdaman; curl --user $RASCURL \"https://datacubes.earthmaps.io/rasdaman/admin/layer/style/add?COVERAGEID=era5_4km_daily_rh2_mean&STYLEID=ardac_rh2_mean_daily&ABSTRACT=Daily%20Mean%20Relative%20Humidity%20(ERA5%204km)&WCPSQUERYFRAGMENT=%24c&COLORTABLETYPE=ColorMap&\" --data-urlencode \"COLORTABLEDEFINITION={\\\"type\\\":\\\"ramp\\\",\\\"colorTable\\\":{\\\"0\\\":[139,69,19,255],\\\"20\\\":[205,133,63,255],\\\"40\\\":[244,164,96,255],\\\"60\\\":[230,230,250,255],\\\"70\\\":[173,216,230,255],\\\"80\\\":[135,206,235,255],\\\"90\\\":[70,130,180,255],\\\"100\\\":[25,25,112,255],\\\"9999\\\":[0,0,0,0]}}\"",
        "abort_on_error": true
      }
    ],
    "input": {
      "coverage_id": "era5_4km_daily_rh2_mean",
      "paths": [
        "rh2_mean_merged.nc"
      ]
    },
    "recipe": {
      "name": "general_coverage",
      "options": {
        "wms_import": true,
        "tiling": "ALIGNED [0:*, 0:*, 0:*] tile size 4194304",
        "import_order": "ascending",
        "coverage": {
          "crs": "OGC/0/AnsiDate?axis-label=\"time\"@EPSG/0/3338",
          "metadata": {
            "type": "xml",
            "global": {
              "Title": "'Daily Mean 2m Relative Humidity'"
            }
          },
          "slicer": {
            "type": "netcdf",
            "pixelIsPoint": true,
            "bands": [
              {
                "name": "rh2_mean",
                "identifier": "rh2_mean"
              }
            ],
            "axes": {
	            "time": {
	              "statements": "from datetime import datetime; import netCDF4",
                "min": "netCDF4.num2date(${netcdf:variable:time:min}, '${netcdf:variable:time:units}', calendar='standard').strftime(\"%Y-%m-%dT%H:%M\")",
                "max": "netCDF4.num2date(${netcdf:variable:time:max}, '${netcdf:variable:time:units}', calendar='standard').strftime(\"%Y-%m-%dT%H:%M\")",
                "directPositions": "[netCDF4.num2date(x, '${netcdf:variable:time:units}', calendar='standard').strftime(\"%Y-%m-%dT%H:%M\") for x in ${netcdf:variable:time}]",
                "gridOrder": 0,
                "type": "ansidate",
                "irregular": true
              },
	            "X": {
                "min": "${netcdf:variable:x:min}",
                "max": "${netcdf:variable:x:max}",
                "resolution": "${netcdf:variable:x:resolution}",
		            "gridOrder": 2
              },
              "Y": {
                "min": "${netcdf:variable:y:min}",
                "max": "${netcdf:variable:y:max}",
                "resolution": "${netcdf:variable:y:resolution}",
                "gridOrder": 1
              }
             }
            }
          }
        }
      }
}
