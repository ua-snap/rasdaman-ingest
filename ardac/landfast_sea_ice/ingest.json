{
  "config": {
    "service_url": "https://localhost/rasdaman/ows",
    "tmp_directory": "/tmp/",
    "blocking": true,
    "mock": false,
    "automated": true,
    "track_files": false
  },
  "hooks": [
    {
      "description": "Create Landfast Sea Ice WMS Style for ARDAC",
      "when": "after_import",
      "cmd": ". /etc/default/rasdaman; curl --user $RASCURL \"https://datacubes.earthmaps.io/rasdaman/admin/layer/style/add?COVERAGEID=landfast_sea_ice_extent&STYLEID=landfast_sea_ice_extent_ardac&ABSTRACT=landfast_ice&COLORTABLETYPE=ColorMap&\" --data-urlencode \"COLORTABLEDEFINITION={\\\"type\\\": \\\"values\\\", \\\"colorTable\\\": {  \\\"0\\\": [0, 0, 0, 0],
         \\\"1\\\": [214, 242, 238, 255] } }\"",
      "abort_on_error": true
    }
  ],
  "input": {
    "coverage_id": "landfast_sea_ice_extent",
    "paths": [
      "geotiffs/*.tif"
    ]
  },
  "recipe": {
    "name": "general_coverage",
    "options": {
      "wms_import": true,
      "coverage": {
        "crs": "OGC/0/AnsiDate?axis-label=\"time\"@EPSG/0/3338",
        "metadata": {
          "type": "xml",
          "global": {
            "Title": "",
            "Encoding": {
              "ice_status": {
                "0": "absent",
                "1": "present"
              },
              "ice_season": {
                "1996": [
                  "1996-10-07T00:00:00.000Z, 1997-07-31T00:00:00000Z"
                ],
                "1997": [
                  "1997-10-01T00:00:00.000Z, 1998-07-31T00:00:00000Z"
                ],
                "1998": [
                  "1998-10-01T00:00:00.000Z, 1999-07-31T00:00:00000Z"
                ],
                "1999": [
                  "1999-10-01T00:00:00.000Z, 2000-07-31T00:00:00000Z"
                ],
                "2000": [
                  "2000-10-01T00:00:00.000Z, 2001-07-31T00:00:00000Z"
                ],
                "2001": [
                  "2001-10-01T00:00:00.000Z, 2002-07-31T00:00:00000Z"
                ],
                "2002": [
                  "2002-10-01T00:00:00.000Z, 2003-07-31T00:00:00000Z"
                ],
                "2003": [
                  "2003-10-01T00:00:00.000Z, 2004-07-31T00:00:00000Z"
                ],
                "2004": [
                  "2004-10-01T00:00:00.000Z, 2005-07-31T00:00:00000Z"
                ],
                "2005": [
                  "2005-10-01T00:00:00.000Z, 2006-07-31T00:00:00000Z"
                ],
                "2006": [
                  "2006-10-01T00:00:00.000Z, 2007-07-31T00:00:00000Z"
                ],
                "2007": [
                  "2007-10-01T00:00:00.000Z, 2008-07-14T00:00:00000Z"
                ]
              }
            }
          }
        },
        "slicer": {
          "type": "gdal",
          "axes": {
            "time": {
              "statements": "regex_str = '_([0-9]{4}_[0-9]{2}_[0-9]{2}).tif'",
              "min": "datetime(regex_extract('${file:name}', regex_str ,1), 'YYYY_MM_DD')",
              "crsOrder": 0,
              "gridOrder": 0,
              "type": "ansidate",
              "irregular": true,
              "sliceGroupSize": 1,
              "dataBound": false
            },
            "X": {
              "min": "${gdal:minX}",
              "max": "${gdal:maxX}",
              "resolution": "${gdal:resolutionX}"
            },
            "Y": {
              "min": "${gdal:minY}",
              "max": "${gdal:maxY}",
              "resolution": "${gdal:resolutionY}"
            }
          }
        }
      }
    }
  }
}