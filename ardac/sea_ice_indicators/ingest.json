{
  "config": {
    "service_url": "http://localhost:8080/rasdaman/ows",
    "tmp_directory": "/tmp/",
    "crs_resolver": "http://localhost:8080/def/",
    "default_null_values": [
      "-9999"
    ],
    "mock": false,
    "automated": true
  },
  "hooks": [
    {
      "description": "Swap X and Y axes to needed order. Should be: (year, xc, yc)",
      "when": "before_import",
      "cmd": "ncpdq -a xc,yc \"${file:path}\" \"${file:path}.swap\"",
      "abort_on_error": true,
      "replace_path": ["${file:path}.swap"]
    },
    {
      "description": "Remove x/y swapped file.",
      "when": "after_import",
      "cmd": "rm -rf \"${file:path}\""
    },
    {
      "description": "Create freeze-up start blue24 WMS style",
      "when": "after_import",
      "cmd": "curl \"http://localhost:8080/rasdaman/admin/layer/style/add?COVERAGEID=arctic_seaice_indicators_noaa&STYLEID=freezeup_start_blue24&ABSTRACT=ESRI%20Blue%2024%20for%20freeze-up%20valid%209%2F1%20-%202%2F28&WCPSQUERYFRAGMENT=%24c.freezeup_start&COLORTABLETYPE=ColorMap&\" --data-urlencode \"COLORTABLEDEFINITION={\\\"type\\\":\\\"ramp\\\",\\\"colorTable\\\":{\\\"243\\\":[255,255,255,0],\\\"244\\\":[178,202,255,255],\\\"425\\\":[39,56,89,255]}}\"",
      "abort_on_error": true
    },
    {
      "description": "Create freeze-up end blue24 WMS style",
      "when": "after_import",
      "cmd": "curl \"http://localhost:8080/rasdaman/admin/layer/style/add?COVERAGEID=arctic_seaice_indicators_noaa&STYLEID=freezeup_end_blue24&ABSTRACT=ESRI%20Blue%2024%20for%20freeze-up%20valid%209%2F1%20-%202%2F28&WCPSQUERYFRAGMENT=%24c.freezeup_end&COLORTABLETYPE=ColorMap&\" --data-urlencode \"COLORTABLEDEFINITION={\\\"type\\\":\\\"ramp\\\",\\\"colorTable\\\":{\\\"243\\\":[255,255,255,0],\\\"244\\\":[178,202,255,255],\\\"425\\\":[39,56,89,255]}}\"",
      "abort_on_error": true
    },
    {
      "description": "Create break-up start blue24 WMS style",
      "when": "after_import",
      "cmd": "curl \"http://localhost:8080/rasdaman/admin/layer/style/add?COVERAGEID=arctic_seaice_indicators_noaa&STYLEID=breakup_start_blue24&ABSTRACT=ESRI%20Blue%2024%20for%20break-up%20valid%202%2F1%20-%209%2F29&WCPSQUERYFRAGMENT=%24c.breakup_start&COLORTABLETYPE=ColorMap&\" --data-urlencode \"COLORTABLEDEFINITION={\\\"type\\\":\\\"ramp\\\",\\\"colorTable\\\":{\\\"31\\\":[255,255,255,0],\\\"32\\\":[178,202,255,255],\\\"273\\\":[39,56,89,255]}}\"",
      "abort_on_error": true
    },
    {
      "description": "Create break-up end blue24 WMS style",
      "when": "after_import",
      "cmd": "curl \"http://localhost:8080/rasdaman/admin/layer/style/add?COVERAGEID=arctic_seaice_indicators_noaa&STYLEID=breakup_end_blue24&ABSTRACT=ESRI%20Blue%2024%20for%20break-up%20valid%202%2F1%20-%209%2F29&WCPSQUERYFRAGMENT=%24c.breakup_end&COLORTABLETYPE=ColorMap&\" --data-urlencode \"COLORTABLEDEFINITION={\\\"type\\\":\\\"ramp\\\",\\\"colorTable\\\":{\\\"31\\\":[255,255,255,0],\\\"32\\\":[178,202,255,255],\\\"273\\\":[39,56,89,255]}}\"",
      "abort_on_error": true
    }
  ],
  "input": {
    "coverage_id": "arctic_seaice_indicators_noaa",
    "paths": [
      "arctic_seaice_fubu_dates_1979-2019.nc"
    ]
  },
  "recipe": {
    "name": "general_coverage",
    "options": {
      "wms_import": true,
      "import_order": "ascending",
      "coverage": {
        "crs": "OGC/0/Index1D?axis-label=\"year\"@EPSG/0/3411",
        "metadata": {
          "type": "xml",
          "global": {
            "Title": "'Eicken / Johnson / Walsh / NOAA Sea Ice Indicators'"
          }
        },
        "slicer": {
          "type": "netcdf",
          "pixelIsPoint": true,
          "bands": [
            {
              "name": "freezeup_start",
              "identifier": "freezeup_start",
              "nilValue": "-9999"
            },
            {
              "name": "freezeup_end",
              "identifier": "freezeup_end",
              "nilValue": "-9999"
            },
            {
              "name": "breakup_start",
              "identifier": "breakup_start",
              "nilValue": "-9999"
            },
            {
              "name": "breakup_end",
              "identifier": "breakup_end",
              "nilValue": "-9999"
            }
          ],
          "axes": {
            "year": {
              "min": "${netcdf:variable:year:min}",
              "max": "${netcdf:variable:year:max}",
              "directPositions": "${netcdf:variable:year}",
              "irregular": true,
              "gridOrder": 0
            },
            "X": {
              "min": "${netcdf:variable:xc:min}",
              "max": "${netcdf:variable:xc:max}",
              "resolution": "${netcdf:variable:xc:resolution}",
              "gridOrder": 1
            },
            "Y": {
              "min": "${netcdf:variable:yc:min}",
              "max": "${netcdf:variable:yc:max}",
              "resolution": "${netcdf:variable:yc:resolution}",
              "gridOrder": 2
            }
          }
        }
      }
    }
  }
}